Version 4
SHEET 1 2344 2660
WIRE 528 -192 512 -192
WIRE 528 -144 528 -192
WIRE 528 -144 496 -144
WIRE 480 -96 448 -96
WIRE 640 -96 576 -96
WIRE -1584 -64 -1600 -64
WIRE 448 -48 448 -96
WIRE 448 -48 304 -48
WIRE 640 -48 640 -96
WIRE 704 -48 640 -48
WIRE -1584 -16 -1584 -64
WIRE -1584 -16 -1616 -16
WIRE 304 -16 304 -48
WIRE -1168 0 -1424 0
WIRE 448 0 448 -48
WIRE 480 0 448 0
WIRE 640 0 640 -48
WIRE 640 0 576 0
WIRE -1632 32 -1664 32
WIRE -1472 32 -1536 32
WIRE 560 48 528 48
WIRE -3456 80 -3504 80
WIRE -1664 80 -1664 32
WIRE -1664 80 -1760 80
WIRE -1472 80 -1472 32
WIRE -1424 80 -1424 0
WIRE -1424 80 -1472 80
WIRE -1392 80 -1424 80
WIRE 304 80 304 64
WIRE 704 80 704 -48
WIRE 816 80 704 80
WIRE 528 96 528 48
WIRE 528 96 496 96
WIRE -3456 112 -3456 80
WIRE -1664 128 -1664 80
WIRE -1632 128 -1664 128
WIRE -1472 128 -1472 80
WIRE -1472 128 -1536 128
WIRE 816 128 816 80
WIRE -3504 160 -3504 80
WIRE -3456 160 -3504 160
WIRE -2800 160 -2800 128
WIRE -2768 160 -2800 160
WIRE 528 160 528 96
WIRE 528 160 496 160
WIRE -2800 176 -2800 160
WIRE -1552 176 -1584 176
WIRE -3392 192 -3408 192
WIRE -2896 192 -3392 192
WIRE 480 208 448 208
WIRE 640 208 576 208
WIRE -2896 224 -2896 192
WIRE -2848 224 -2896 224
WIRE -2768 224 -2768 160
WIRE -2768 224 -2800 224
WIRE -1584 224 -1584 176
WIRE -1584 224 -1616 224
WIRE -3456 240 -3456 208
WIRE -3392 240 -3392 192
WIRE -3392 240 -3456 240
WIRE -3232 240 -3264 240
WIRE -3024 240 -3040 240
WIRE 816 240 816 208
WIRE 976 240 816 240
WIRE -2848 256 -2848 224
WIRE 448 256 448 208
WIRE 448 256 304 256
WIRE 640 256 640 208
WIRE 704 256 704 80
WIRE 704 256 640 256
WIRE 816 256 816 240
WIRE -3232 272 -3232 240
WIRE -3040 272 -3040 240
WIRE -2592 272 -2592 240
WIRE -2560 272 -2592 272
WIRE -2592 288 -2592 272
WIRE -1584 288 -1584 224
WIRE -1584 288 -1616 288
WIRE 304 288 304 256
WIRE -3456 304 -3456 240
WIRE -2016 304 -2240 304
WIRE -1760 304 -1760 80
WIRE -1760 304 -1936 304
WIRE 448 304 448 256
WIRE 480 304 448 304
WIRE 640 304 640 256
WIRE 640 304 576 304
WIRE -3264 320 -3264 240
WIRE -3232 320 -3264 320
WIRE -3024 320 -3024 240
WIRE -3024 320 -3040 320
WIRE -2896 336 -2896 224
WIRE -2640 336 -2896 336
WIRE -2560 336 -2560 272
WIRE -2560 336 -2592 336
WIRE -1632 336 -1664 336
WIRE -1472 336 -1536 336
WIRE -912 336 -928 336
WIRE -3152 352 -3184 352
WIRE -3088 352 -3152 352
WIRE 560 352 528 352
WIRE 816 352 816 320
WIRE -2640 368 -2640 336
WIRE -912 368 -912 336
WIRE -912 368 -928 368
WIRE -1760 384 -1760 304
WIRE -1664 384 -1664 336
WIRE -1664 384 -1760 384
WIRE -1472 384 -1472 336
WIRE -1360 384 -1472 384
WIRE -528 384 -560 384
WIRE 304 384 304 368
WIRE 528 384 528 352
WIRE 528 384 496 384
WIRE -1360 400 -1360 384
WIRE -1360 400 -1440 400
WIRE -528 400 -528 384
WIRE -528 400 -560 400
WIRE -3232 416 -3232 368
WIRE -3152 416 -3152 352
WIRE -3152 416 -3232 416
WIRE -2800 416 -2800 272
WIRE -2704 416 -2800 416
WIRE -912 416 -912 368
WIRE -912 416 -928 416
WIRE -160 416 -160 368
WIRE -128 416 -160 416
WIRE -3280 432 -3376 432
WIRE -3040 432 -3040 368
WIRE -2912 432 -3040 432
WIRE -1664 432 -1664 384
WIRE -1632 432 -1664 432
WIRE -1472 432 -1472 384
WIRE -1472 432 -1536 432
WIRE -1360 432 -1360 400
WIRE -3376 448 -3376 432
WIRE -976 448 -1008 448
WIRE -528 448 -528 400
WIRE -528 448 -560 448
WIRE -160 448 -160 416
WIRE -3232 464 -3232 416
WIRE -3040 464 -3040 432
WIRE -1552 480 -1584 480
WIRE -1328 480 -1360 480
WIRE -1008 480 -1008 448
WIRE -928 480 -928 464
WIRE -928 480 -1008 480
WIRE -656 480 -928 480
WIRE -608 480 -656 480
WIRE -128 496 -128 416
WIRE -128 496 -160 496
WIRE -3200 512 -3232 512
WIRE -3040 512 -3072 512
WIRE -1584 512 -1584 480
WIRE -1584 512 -1616 512
WIRE -1440 512 -1440 400
WIRE -1408 512 -1440 512
WIRE -656 512 -656 480
WIRE -208 512 -656 512
WIRE -2800 528 -2800 416
WIRE -2768 528 -2800 528
WIRE -2592 528 -2592 384
WIRE -928 528 -928 480
WIRE -208 528 -208 512
WIRE -3280 544 -3280 432
WIRE -2960 544 -2992 544
WIRE -2800 544 -2800 528
WIRE -1360 544 -1360 528
WIRE -1328 544 -1328 480
WIRE -1328 544 -1360 544
WIRE -672 544 -704 544
WIRE -560 544 -560 496
WIRE -560 544 -672 544
WIRE -496 544 -560 544
WIRE -464 544 -496 544
WIRE -2240 560 -2240 304
WIRE -2240 560 -2352 560
WIRE -704 560 -704 544
WIRE -464 560 -464 544
WIRE -2560 576 -2592 576
WIRE -3456 592 -3456 384
WIRE -3376 592 -3456 592
WIRE -3232 592 -3232 560
WIRE -3200 592 -3200 512
WIRE -3200 592 -3232 592
WIRE -3120 592 -3200 592
WIRE -3072 592 -3072 512
WIRE -3072 592 -3120 592
WIRE -3040 592 -3040 560
WIRE -3040 592 -3072 592
WIRE -2768 592 -2768 528
WIRE -2768 592 -2800 592
WIRE -1360 592 -1360 544
WIRE -352 592 -400 592
WIRE -3456 608 -3456 592
WIRE -3120 608 -3120 592
WIRE -2704 608 -2704 416
WIRE -2640 608 -2704 608
WIRE -672 608 -672 544
WIRE -672 608 -704 608
WIRE -496 608 -496 544
WIRE -464 608 -496 608
WIRE -352 608 -352 592
WIRE -2912 624 -2912 432
WIRE -2848 624 -2912 624
WIRE -2240 624 -2240 560
WIRE 848 624 832 624
WIRE -2592 640 -2592 624
WIRE -2560 640 -2560 576
WIRE -2560 640 -2592 640
WIRE -752 640 -832 640
WIRE -400 640 -400 592
WIRE -400 640 -416 640
WIRE -1504 656 -1520 656
WIRE -1248 656 -1248 624
WIRE -1216 656 -1248 656
WIRE -160 656 -160 544
WIRE 0 656 -160 656
WIRE 96 656 0 656
WIRE 208 656 96 656
WIRE 384 656 208 656
WIRE 848 656 848 624
WIRE 848 656 832 656
WIRE -2592 672 -2592 640
WIRE -2352 672 -2352 560
WIRE -2352 672 -2592 672
WIRE 1248 672 1216 672
WIRE -3376 688 -3376 592
WIRE -3376 688 -3408 688
WIRE -3216 688 -3376 688
WIRE -3168 688 -3216 688
WIRE 96 688 96 656
WIRE 1248 688 1248 672
WIRE 1248 688 1216 688
WIRE 1616 688 1616 640
WIRE 1648 688 1616 688
WIRE -1504 704 -1504 656
WIRE -1504 704 -1536 704
WIRE -1216 704 -1216 656
WIRE -1216 704 -1248 704
WIRE 0 704 0 656
WIRE 848 704 848 656
WIRE 848 704 832 704
WIRE -2960 720 -2960 544
WIRE -2240 720 -2240 704
WIRE -2240 720 -2960 720
WIRE -704 720 -704 656
WIRE -624 720 -704 720
WIRE 1616 720 1616 688
WIRE -1296 736 -1328 736
WIRE -464 736 -464 656
WIRE -288 736 -464 736
WIRE -160 736 -160 656
WIRE -160 736 -224 736
WIRE 784 736 752 736
WIRE 1248 736 1248 688
WIRE 1248 736 1216 736
WIRE -2240 752 -2240 720
WIRE -1552 752 -1584 752
WIRE -1392 752 -1456 752
WIRE -704 752 -704 720
WIRE -464 752 -464 736
WIRE 208 752 208 720
WIRE -2592 768 -2592 672
WIRE -1328 768 -1328 736
WIRE -1248 768 -1248 752
WIRE -1248 768 -1328 768
WIRE -1168 768 -1168 0
WIRE -832 768 -832 640
WIRE -832 768 -1168 768
WIRE -624 768 -624 720
WIRE -624 768 -656 768
WIRE -512 768 -624 768
WIRE 752 768 752 736
WIRE 832 768 832 752
WIRE 832 768 752 768
WIRE 1120 768 832 768
WIRE 1168 768 1120 768
WIRE 1648 768 1648 688
WIRE 1648 768 1616 768
WIRE 1872 768 1856 768
WIRE 2096 768 2080 768
WIRE -128 784 -160 784
WIRE -1584 800 -1584 752
WIRE -1584 800 -1680 800
WIRE -1392 800 -1392 752
WIRE -1248 800 -1248 768
WIRE -1248 800 -1392 800
WIRE -704 800 -736 800
WIRE -432 800 -464 800
WIRE 1120 800 1120 768
WIRE 1568 800 1120 800
WIRE -2560 816 -2592 816
WIRE -288 816 -288 736
WIRE -208 816 -288 816
WIRE 832 816 832 768
WIRE 1872 816 1872 768
WIRE 1872 816 1856 816
WIRE 2096 816 2096 768
WIRE 2096 816 2080 816
WIRE -128 832 -128 784
WIRE -128 832 -160 832
WIRE 1104 832 1072 832
WIRE 1216 832 1216 784
WIRE 1216 832 1104 832
WIRE 1280 832 1216 832
WIRE 1312 832 1280 832
WIRE -3216 848 -3216 688
WIRE -2640 848 -3216 848
WIRE -1584 848 -1584 800
WIRE -1552 848 -1584 848
WIRE -1392 848 -1392 800
WIRE -1392 848 -1456 848
WIRE 0 848 0 768
WIRE 96 848 96 768
WIRE 96 848 0 848
WIRE 1072 848 1072 832
WIRE 1312 848 1312 832
WIRE 1808 848 1776 848
WIRE 2032 848 1968 848
WIRE -736 864 -736 800
WIRE -704 864 -704 848
WIRE -704 864 -736 864
WIRE -464 864 -464 848
WIRE -432 864 -432 800
WIRE -432 864 -464 864
WIRE 2160 864 2080 864
WIRE -2592 880 -2592 864
WIRE -2560 880 -2560 816
WIRE -2560 880 -2592 880
WIRE -704 880 -704 864
WIRE -464 880 -464 864
WIRE 1856 880 1856 864
WIRE 1968 880 1968 848
WIRE 1968 880 1856 880
WIRE 2080 880 2080 864
WIRE 2192 880 2080 880
WIRE -2592 896 -2592 880
WIRE -1472 896 -1504 896
WIRE -160 896 -160 832
WIRE 1104 896 1104 832
WIRE 1104 896 1072 896
WIRE 1280 896 1280 832
WIRE 1312 896 1280 896
WIRE 1616 896 1616 816
WIRE 1776 896 1776 848
WIRE 1776 896 1616 896
WIRE 1856 912 1856 880
WIRE 2080 912 2080 880
WIRE -1680 928 -1680 800
WIRE -1680 928 -1808 928
WIRE 976 928 976 240
WIRE 1024 928 976 928
WIRE 1424 928 1360 928
WIRE 1856 928 1856 912
WIRE 2080 928 2080 912
WIRE -1504 944 -1504 896
WIRE -1504 944 -1536 944
WIRE -832 976 -832 768
WIRE 0 976 0 848
WIRE 0 976 -832 976
WIRE 1888 976 1856 976
WIRE 2112 976 2080 976
WIRE -1808 992 -1808 928
WIRE -1504 1008 -1504 944
WIRE -1504 1008 -1536 1008
WIRE 1072 1008 1072 944
WIRE 1152 1008 1072 1008
WIRE 1776 1008 1776 896
WIRE 1808 1008 1776 1008
WIRE 1968 1008 1968 880
WIRE 2032 1008 1968 1008
WIRE 2160 1008 2160 864
WIRE 2272 1008 2272 976
WIRE 2272 1008 2160 1008
WIRE 1312 1024 1312 944
WIRE 1488 1024 1312 1024
WIRE 1616 1024 1616 896
WIRE 1616 1024 1552 1024
WIRE 1888 1024 1888 976
WIRE 1888 1024 1856 1024
WIRE 2112 1024 2112 976
WIRE 2112 1024 2080 1024
WIRE 1072 1040 1072 1008
WIRE 1312 1040 1312 1024
WIRE 1856 1040 1856 1024
WIRE 2080 1040 2080 1024
WIRE -1552 1056 -1584 1056
WIRE -1392 1056 -1456 1056
WIRE 1152 1056 1152 1008
WIRE 1152 1056 1120 1056
WIRE 1264 1056 1152 1056
WIRE 1648 1072 1616 1072
WIRE 1072 1088 1040 1088
WIRE 1344 1088 1312 1088
WIRE -1680 1104 -1680 928
WIRE -1584 1104 -1584 1056
WIRE -1584 1104 -1680 1104
WIRE -1392 1104 -1392 1056
WIRE -1168 1104 -1168 768
WIRE -1168 1104 -1392 1104
WIRE 1488 1104 1488 1024
WIRE 1568 1104 1488 1104
WIRE -1808 1120 -1808 1072
WIRE 1648 1120 1648 1072
WIRE 1648 1120 1616 1120
WIRE -1584 1152 -1584 1104
WIRE -1552 1152 -1584 1152
WIRE -1392 1152 -1392 1104
WIRE -1392 1152 -1456 1152
WIRE 1040 1152 1040 1088
WIRE 1072 1152 1072 1136
WIRE 1072 1152 1040 1152
WIRE 1312 1152 1312 1136
WIRE 1344 1152 1344 1088
WIRE 1344 1152 1312 1152
WIRE 1072 1168 1072 1152
WIRE 1312 1168 1312 1152
WIRE 1616 1184 1616 1120
WIRE -1472 1200 -1504 1200
WIRE 384 1216 384 656
WIRE 1424 1216 1424 928
WIRE 1424 1216 384 1216
WIRE -1504 1232 -1504 1200
WIRE -1504 1232 -1536 1232
FLAG -1584 128 0
FLAG -1584 432 0
FLAG -832 -48 Vdd
IOPIN -832 -48 Out
FLAG -1584 32 Vdd
IOPIN -1584 32 Out
FLAG -1584 336 Vdd
IOPIN -1584 336 Out
FLAG -1600 -64 SEL+
IOPIN -1600 -64 In
FLAG -1616 224 SEL-
IOPIN -1616 224 In
FLAG -1616 512 SEL+
IOPIN -1616 512 In
FLAG -1392 80 OUT0
IOPIN -1392 80 BiDir
FLAG -832 32 0
FLAG 2096 768 Vdd
IOPIN 2096 768 In
FLAG 2080 1040 0
FLAG 2080 912 SEL-
IOPIN 2080 912 Out
FLAG -1360 592 0
FLAG -1504 848 0
FLAG -1504 1152 0
FLAG -1504 752 Vdd
IOPIN -1504 752 Out
FLAG -1504 1056 Vdd
IOPIN -1504 1056 Out
FLAG -1520 656 SEL+
IOPIN -1520 656 In
FLAG -1536 944 SEL-
IOPIN -1536 944 In
FLAG -1536 1232 SEL+
IOPIN -1536 1232 In
FLAG -1808 1120 0
FLAG -1248 624 Vdd
IOPIN -1248 624 Out
FLAG -3456 704 0
FLAG -3376 528 0
FLAG -3120 704 0
FLAG -3120 656 0
FLAG -3456 656 0
FLAG -2240 832 0
FLAG -2800 640 0
FLAG -2592 896 0
FLAG -560 384 Vdd
IOPIN -560 384 In
FLAG -928 336 Vdd
IOPIN -928 336 In
FLAG -928 608 0
FLAG -704 880 0
FLAG -464 880 0
FLAG -160 368 Vdd
IOPIN -160 368 In
FLAG -160 896 0
FLAG 528 0 0
FLAG 528 304 0
FLAG 528 -96 Vdd
IOPIN 528 -96 Out
FLAG 528 208 Vdd
IOPIN 528 208 Out
FLAG 512 -192 SEL-
IOPIN 512 -192 In
FLAG 496 96 SEL+
IOPIN 496 96 In
FLAG 496 384 SEL-
IOPIN 496 384 In
FLAG 304 384 0
FLAG 304 80 0
FLAG 816 352 0
FLAG 1216 672 Vdd
IOPIN 1216 672 In
FLAG 832 624 Vdd
IOPIN 832 624 In
FLAG 832 896 0
FLAG 1072 1168 0
FLAG 1312 1168 0
FLAG 1616 640 Vdd
IOPIN 1616 640 In
FLAG 1616 1184 0
FLAG 1872 768 Vdd
IOPIN 1872 768 In
FLAG 1856 1040 0
FLAG 1856 912 SEL+
IOPIN 1856 912 Out
FLAG 208 752 0
FLAG -3456 80 Vdd
IOPIN -3456 80 In
FLAG -3232 240 Vdd
IOPIN -3232 240 In
FLAG -3040 240 Vdd
IOPIN -3040 240 In
FLAG -2800 128 Vdd
IOPIN -2800 128 In
FLAG -2592 240 Vdd
IOPIN -2592 240 In
FLAG -352 688 0
FLAG 2192 880 output
FLAG 2272 976 Final
IOPIN 2272 976 Out
DATAFLAG -3120 592 "$"
DATAFLAG -3040 400 "$"
DATAFLAG -3232 400 "$"
DATAFLAG -3264 688 "$"
DATAFLAG -2800 400 "$"
DATAFLAG -3328 192 "$"
DATAFLAG -2960 720 "$"
DATAFLAG -2592 400 "$"
DATAFLAG -2592 688 "$"
DATAFLAG -576 768 "$"
DATAFLAG -736 480 "$"
DATAFLAG -560 512 "$"
DATAFLAG -464 736 "$"
DATAFLAG -160 656 "$"
DATAFLAG 1200 1056 "$"
DATAFLAG 1040 768 "$"
DATAFLAG 1216 800 "$"
DATAFLAG 1312 1024 "$"
DATAFLAG 1616 944 "$"
SYMBOL cmosn -1632 176 R270
SYMATTR InstName M18
SYMATTR Value2 l=0.18u w=0.48u
SYMBOL cmosn -1632 480 R270
SYMATTR InstName M20
SYMATTR Value2 l=0.18u w=0.48u
SYMBOL cmosp -1536 -16 R90
SYMATTR InstName M21
SYMATTR Value2 l=0.18u w=0.84u
SYMBOL cmosp -1536 288 R90
SYMATTR InstName M22
SYMATTR Value2 l=0.18u w=0.84u
SYMBOL voltage -832 -64 R0
SYMATTR InstName V3
SYMATTR Value 1.8
SYMBOL cmosn 2032 928 R0
SYMATTR InstName M23
SYMATTR Value2 l=180n w=180n
SYMBOL cmosp 2032 768 R0
SYMATTR InstName M24
SYMATTR Value2 l=180n w=480n
SYMBOL res -1920 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rt
SYMATTR Value 20k
SYMBOL cmosn -1408 432 R0
SYMATTR InstName M25
SYMATTR Value2 l=180n w=2u
SYMBOL cmosn -1552 896 R270
SYMATTR InstName M26
SYMATTR Value2 l=0.18u w=0.48u
SYMBOL cmosn -1552 1200 R270
SYMATTR InstName M27
SYMATTR Value2 l=0.18u w=0.48u
SYMBOL cmosp -1456 704 R90
SYMATTR InstName M28
SYMATTR Value2 l=0.18u w=0.84u
SYMBOL cmosp -1456 1008 R90
SYMATTR InstName M29
SYMATTR Value2 l=0.18u w=0.84u
SYMBOL current -1808 992 R0
SYMATTR InstName I0
SYMATTR Value 50n
SYMBOL cmosp -1296 656 R0
SYMATTR InstName M30
SYMATTR Value2 l=360n w=4u
SYMBOL cmosn -3280 464 R0
SYMATTR InstName M31
SYMATTR Value2 l=180n w=2u
SYMBOL cmosn -2992 464 M0
SYMATTR InstName M32
SYMATTR Value2 l=180n w=2u
SYMBOL cmosn -3168 608 R0
SYMATTR InstName M33
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn -3408 608 M0
SYMATTR InstName M34
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp -3184 272 M0
SYMATTR InstName M35
SYMATTR Value2 l=180n w=2u
SYMBOL cmosp -3088 272 R0
SYMATTR InstName M36
SYMATTR Value2 l=180n w=2u
SYMBOL voltage -3376 432 R0
SYMATTR InstName Vref1
SYMATTR Value 0.4
SYMBOL current -3456 304 R0
SYMATTR InstName I2
SYMATTR Value 600n
SYMBOL res -2256 736 R0
SYMATTR InstName Rsense2
SYMATTR Value {7175 + deltaR}
SYMBOL res -2256 608 R0
SYMATTR InstName Rref2
SYMATTR Value 7175
SYMBOL cmosp -2848 544 R0
SYMATTR InstName M37
SYMATTR Value2 l=180n w=2u m=20
SYMBOL cmosp -2848 176 R0
SYMATTR InstName M38
SYMATTR Value2 l=180n w=3u m=50
SYMBOL cmosp -3408 112 M0
SYMATTR InstName M39
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp -2640 288 R0
SYMATTR InstName M40
SYMATTR Value2 l=180n w=4u m=80
SYMBOL cmosn -2640 768 R0
SYMATTR InstName M41
SYMATTR Value2 l=180n w=1u m=1
SYMBOL cmosn -2640 528 R0
SYMATTR InstName M42
SYMATTR Value2 l=180n w=3u m=20
SYMBOL cmosn -656 848 R180
SYMATTR InstName M43
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp -752 560 R0
SYMATTR InstName M44
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp -608 400 R0
SYMATTR InstName M45
SYMATTR Value2 l=180n w=4u
SYMBOL cmosp -976 368 R0
SYMATTR InstName M46
SYMATTR Value2 l=180n w=1u
SYMBOL current -928 528 R0
SYMATTR InstName Iref2
SYMATTR Value 200n
SYMBOL cmosn -512 848 M180
SYMATTR InstName M47
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp -416 560 M0
SYMATTR InstName M48
SYMATTR Value2 l=180n w=500n
SYMBOL voltage -352 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref2
SYMATTR Value 0.8
SYMBOL cmosn -208 736 R0
SYMATTR InstName M49
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp -208 448 R0
SYMATTR InstName M50
SYMATTR Value2 l=180n w=2.4u
SYMBOL cap -224 720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 20f
SYMBOL cap -16 704 R0
SYMATTR InstName C5
SYMATTR Value 20n
SYMATTR SpiceLine Rser=1k
SYMBOL res 80 672 R0
SYMATTR InstName R4
SYMATTR Value 200k
SYMBOL cmosn 480 48 R270
SYMATTR InstName M51
SYMATTR Value2 l=0.18u w=0.48u
SYMBOL cmosn 480 352 R270
SYMATTR InstName M52
SYMATTR Value2 l=0.18u w=0.48u
SYMBOL cmosp 576 -144 R90
SYMATTR InstName M53
SYMATTR Value2 l=0.18u w=0.84u
SYMBOL cmosp 576 160 R90
SYMATTR InstName M54
SYMATTR Value2 l=0.18u w=0.84u
SYMBOL voltage 304 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vh1
SYMATTR Value .7
SYMBOL voltage 304 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vl1
SYMATTR Value .65
SYMBOL res 800 112 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 800 256 R0
SYMATTR InstName C3
SYMATTR Value .5n
SYMBOL cmosn 1120 1136 R180
SYMATTR InstName M55
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp 1024 848 R0
SYMATTR InstName M56
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp 1168 688 R0
SYMATTR InstName M57
SYMATTR Value2 l=180n w=4u
SYMBOL cmosp 784 656 R0
SYMATTR InstName M58
SYMATTR Value2 l=180n w=1u
SYMBOL current 832 816 R0
SYMATTR InstName Iref3
SYMATTR Value 200n
SYMBOL cmosn 1264 1136 M180
SYMATTR InstName M59
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp 1360 848 M0
SYMATTR InstName M60
SYMATTR Value2 l=180n w=500n
SYMBOL cmosn 1568 1024 R0
SYMATTR InstName M61
SYMATTR Value2 l=180n w=500n
SYMBOL cmosp 1568 720 R0
SYMATTR InstName M62
SYMATTR Value2 l=180n w=2.4u
SYMBOL cap 1552 1008 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 20f
SYMBOL cmosn 1808 928 R0
SYMATTR InstName M1
SYMATTR Value2 l=180n w=180n
SYMBOL cmosp 1808 768 R0
SYMATTR InstName M2
SYMATTR Value2 l=180n w=480n
SYMBOL cap 192 656 R0
SYMATTR InstName C1
SYMATTR Value 1n
TEXT -728 -88 Left 2 !.inc tsmc018.lib
TEXT -728 -56 Left 2 !.op
TEXT -728 56 Left 2 !.tran 0 10m 10u
TEXT -504 -176 Left 2 ;Kn = 240uA/V^2,  Kp= 65uA/V^2\nVthn= 0.366,        Vthp= 0.39V
TEXT -3544 112 Left 2 ;Opamp 1
TEXT -2328 528 Left 2 ;Reading circuit
TEXT -1032 216 Left 2 ;opamp 2, Integrator
TEXT 712 496 Left 2 ;Opamp 3,Comparator
TEXT 1776 720 Left 2 ;Inverters
TEXT -720 -16 Left 2 !.step param deltaR list 0 20 45 65 85 110
TEXT -720 16 Left 2 !.param deltaR 110 ;
RECTANGLE Normal -2340 508 -2096 936 2
RECTANGLE Normal -3564 4 -2480 912 2
RECTANGLE Normal -1060 188 -24 1136 2
RECTANGLE Normal -2084 220 -1864 408 2
RECTANGLE Normal 692 472 1720 1300 2
